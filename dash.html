<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LumenOS | Enterprise Rendering Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-analytics-compat.js"></script>
</head>
<style>
  &lt;style&gt;
:root {
    /* Core Colors */
    --surface-primary: #000000;
    --surface-secondary: #161618;
    --surface-tertiary: #232326;
    
    /* Accent Colors */
    --accent-primary: #0066FF;
    --accent-secondary: #00D1FF;
    --accent-gradient: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
    
    /* Text Colors */
    --text-primary: #FFFFFF;
    --text-secondary: rgba(255, 255, 255, 0.7);
    --text-tertiary: rgba(255, 255, 255, 0.5);
    
    /* Status Colors */
    --success: #00D180;
    --warning: #FFB800;
    --error: #FF3B3B;
    
    /* UI Elements */
    --border-light: rgba(255, 255, 255, 0.1);
    --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
    --glass-bg: rgba(255, 255, 255, 0.05);
    --glass-border: rgba(255, 255, 255, 0.05);
    
    /* Spacing */
    --space-xs: 0.25rem;
    --space-sm: 0.5rem;
    --space-md: 1rem;
    --space-lg: 1.5rem;
    --space-xl: 2rem;
    
    /* Border Radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --radius-xl: 24px;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
}

body {
    background: var(--surface-primary);
    color: var(--text-primary);
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
}

.app-container {
    display: flex;
    min-height: 100vh;
}

/* Side Navigation */
.side-nav {
    width: 280px;
    background: var(--surface-secondary);
    border-right: 1px solid var(--border-light);
    padding: var(--space-lg);
    display: flex;
    flex-direction: column;
    position: fixed;
    height: 100vh;
    backdrop-filter: blur(20px);
}

.brand {
    padding: var(--space-md) 0;
    margin-bottom: var(--space-xl);
}

.brand img {
    height: 32px;
    width: auto;
}

.nav-sections {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-xl);
}

.nav-section {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.nav-header {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-tertiary);
    padding: var(--space-sm) var(--space-md);
}

.nav-item {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    padding: var(--space-md);
    color: var(--text-secondary);
    text-decoration: none;
    border-radius: var(--radius-md);
    transition: all 0.3s ease;
}

.nav-item:hover {
    background: var(--glass-bg);
    color: var(--text-primary);
}

.nav-item.active {
    background: var(--accent-gradient);
    color: var(--text-primary);
}

.nav-item.premium::after {
    content: "PRO";
    font-size: 0.65rem;
    padding: 2px 6px;
    background: var(--accent-primary);
    border-radius: 4px;
    margin-left: auto;
}

.nav-footer {
    border-top: 1px solid var(--border-light);
    padding-top: var(--space-lg);
}

/* Main Content Area */
.main-content {
    margin-left: 280px;
    flex: 1;
    padding: var(--space-lg);
}

/* Top Bar */
.top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-xl);
    padding: var(--space-md);
    background: var(--surface-secondary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-light);
}

.search-bar input {
    background: var(--surface-tertiary);
    border: none;
    padding: var(--space-md) var(--space-lg);
    border-radius: var(--radius-md);
    color: var(--text-primary);
    width: 300px;
    font-size: 0.9rem;
}

.search-bar input:focus {
    outline: 1px solid var(--accent-primary);
}

.top-actions {
    display: flex;
    gap: var(--space-md);
}

.icon-button {
    background: var(--surface-tertiary);
    border: none;
    width: 40px;
    height: 40px;
    border-radius: var(--radius-md);
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.3s ease;
}

.icon-button:hover {
    background: var(--glass-bg);
}

/* Stats Overview */
.stats-overview {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-lg);
    margin-bottom: var(--space-xl);
}

.stat-card {
    background: var(--surface-secondary);
    padding: var(--space-xl);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-light);
    transition: transform 0.3s ease;
}

.stat-card:hover {
    transform: translateY(-2px);
}

.stat-value {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: var(--space-sm);
    background: var(--accent-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.stat-label {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-bottom: var(--space-sm);
}

.stat-change {
    font-size: 0.8rem;
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    display: inline-block;
}

.stat-change.positive {
    background: rgba(0, 209, 128, 0.1);
    color: var(--success);
}

.stat-change.negative {
    background: rgba(255, 59, 59, 0.1);
    color: var(--error);
}

.stat-change.neutral {
    background: rgba(255, 184, 0, 0.1);
    color: var(--warning);
}

/* Quick Actions */
.quick-actions {
    margin-bottom: var(--space-xl);
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-lg);
}

.section-header h2 {
    font-size: 1.5rem;
    font-weight: 600;
}

.actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-md);
}

.action-card {
    background: var(--surface-secondary);
    border: 1px solid var(--border-light);
    padding: var(--space-xl);
    border-radius: var(--radius-lg);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-md);
    cursor: pointer;
    transition: all 0.3s ease;
}

.action-card:hover {
    transform: translateY(-2px);
    background: var(--glass-bg);
}

.action-icon {
    font-size: 1.5rem;
    width: 48px;
    height: 48px;
    background: var(--accent-gradient);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-primary);
}

.action-title {
    color: var(--text-primary);
    font-weight: 500;
}

/* Recent Activity */
.activity-list {
    background: var(--surface-secondary);
    border-radius: var(--radius-lg);
    border: 1px solid var(--border-light);
    overflow: hidden;
}

.activity-item {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    padding: var(--space-lg);
    border-bottom: 1px solid var(--border-light);
    transition: background 0.3s ease;
}

.activity-item:hover {
    background: var(--glass-bg);
}

.activity-item:last-child {
    border-bottom: none;
}

/* User Profile */
.user-profile {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    padding: var(--space-md);
    background: var(--surface-tertiary);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition: all 0.3s ease;
}

.user-profile:hover {
    background: var(--glass-bg);
}

.profile-image {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    overflow: hidden;
    background: var(--accent-gradient);
}

.profile-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.profile-info {
    flex: 1;
}

.user-plan {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

/* Toast Notifications */
.toast-container {
    position: fixed;
    bottom: var(--space-lg);
    right: var(--space-lg);
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
    z-index: 1000;
}

.toast {
    padding: var(--space-md) var(--space-lg);
    border-radius: var(--radius-md);
    background: var(--surface-secondary);
    border: 1px solid var(--border-light);
    color: var(--text-primary);
    box-shadow: var(--card-shadow);
    animation: slideIn 0.3s ease;
}

.toast-error {
    border-left: 4px solid var(--error);
}

.toast-success {
    border-left: 4px solid var(--success);
}

.toast-warning {
    border-left: 4px solid var(--warning);
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Responsive Design */
@media (max-width: 1024px) {
    .side-nav {
        width: 80px;
    }
    
    .nav-item span,
    .nav-header,
    .profile-info {
        display: none;
    }
    
    .main-content {
        margin-left: 80px;
    }
}

@media (max-width: 768px) {
    .stats-overview {
        grid-template-columns: 1fr;
    }
    
    .actions-grid {
        grid-template-columns: 1fr;
    }
    
    .search-bar input {
        width: 200px;
    }
}
&lt;/style&gt;
</style>
<body>
    <!-- Main Layout -->
    <div class="app-container">
        <!-- Side Navigation -->
        <nav class="side-nav">
            <div class="brand">
                <img src="//b9fe070413d9eb020045866da2feb86e.cdn.bubble.io/f1728834965913x568986154418384060/2.svg" 
                     alt="LumenOS Logo">
            </div>
            
            <div class="nav-sections">
                <div class="nav-section">
                    <div class="nav-header">Main</div>
                    <a href="#" class="nav-item active">
                        <span class="icon">‚óÜ</span>
                        <span>Overview</span>
                    </a>
                    <a href="#" class="nav-item" onclick="showProjects()">
                        <span class="icon">‚¨°</span>
                        <span>Projects</span>
                    </a>
                    <a href="#" class="nav-item" onclick="showRenderQueue()">
                        <span class="icon">‚¨¢</span>
                        <span>Render Queue</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-header">Applications</div>
                    <a href="are1.html" class="nav-item">
                        <span class="icon">1</span>
                        <span>A.R.E Basic</span>
                    </a>
                    <a href="are2.html" class="nav-item premium">
                        <span class="icon">2</span>
                        <span>A.R.E Pro</span>
                    </a>
                </div>
            </div>

            <div class="nav-footer">
                <div class="user-profile" onclick="toggleUserMenu()">
                    <div class="profile-image">
                        <img id="userAvatar" src="/api/placeholder/32/32" alt="Profile">
                    </div>
                    <div class="profile-info">
                        <div id="userName">Loading...</div>
                        <div id="userPlan" class="user-plan">Basic Plan</div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <div class="search-bar">
                    <input type="search" placeholder="Search projects...">
                </div>
                <div class="top-actions">
                    <button class="icon-button" onclick="showNotifications()">
                        <span class="icon">üîî</span>
                    </button>
                    <button class="icon-button" onclick="showSettings()">
                        <span class="icon">‚öôÔ∏è</span>
                    </button>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <!-- Stats Overview -->
                <section class="stats-overview">
                    <div class="stat-card">
                        <div class="stat-value" id="activeProjects">0</div>
                        <div class="stat-label">Active Projects</div>
                        <div class="stat-change positive">+12.5%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="renderTime">0ms</div>
                        <div class="stat-label">Average Render Time</div>
                        <div class="stat-change negative">-3.2%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="storageUsed">0GB</div>
                        <div class="stat-label">Storage Used</div>
                        <div class="stat-change neutral">42%</div>
                    </div>
                </section>

                <!-- Quick Actions -->
                <section class="quick-actions">
                    <div class="section-header">
                        <h2>Quick Actions</h2>
                    </div>
                    <div class="actions-grid">
                        <button class="action-card" onclick="newProject()">
                            <span class="action-icon">+</span>
                            <span class="action-title">New Project</span>
                        </button>
                        <button class="action-card" onclick="importModel()">
                            <span class="action-icon">‚Üë</span>
                            <span class="action-title">Import Model</span>
                        </button>
                        <button class="action-card" onclick="showTutorial()">
                            <span class="action-icon">?</span>
                            <span class="action-title">Tutorial</span>
                        </button>
                    </div>
                </section>

                <!-- Recent Activity -->
                <section class="recent-activity">
                    <div class="section-header">
                        <h2>Recent Activity</h2>
                        <button class="view-all">View All</button>
                    </div>
                    <div class="activity-list" id="activityList">
                        <!-- Activity items will be populated by JavaScript -->
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Notification Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script>
        // Firebase initialization
        const firebaseConfig = {
            apiKey: "AIzaSyC7rmhpa1z9xdXBQVABJsUfihojEhIvz5o",
            authDomain: "lumenos-749a1.firebaseapp.com",
            projectId: "lumenos-749a1",
            storageBucket: "lumenos-749a1.firebasestorage.app",
            messagingSenderId: "857410556058",
            appId: "1:857410556058:web:bb28ae2a03874f8f27cf23"
        };

        // Initialize Firebase services
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const storage = firebase.storage();
        const analytics = firebase.analytics();

        // Global state
        let currentUser = null;
        let userSettings = null;

        // Authentication state observer
        auth.onAuthStateChanged(async (user) => {
            console.log('Auth state changed:', user);
            currentUser = user;
            
            if (user) {
                console.log('User is signed in');
                await loadUserData();
                initializeDashboard();
            } else {
                console.log('User is signed out');
                window.location.href = '/login.html';
            }
        });

        // User data management
        async function loadUserData() {
            try {
                const userDoc = await db.collection('users').doc(currentUser.uid).get();
                
                if (userDoc.exists) {
                    userSettings = userDoc.data();
                } else {
                    userSettings = await createDefaultUserSettings();
                }
                
                updateUIWithUserData();
            } catch (error) {
                console.error('Error loading user data:', error);
                showToast('Error loading user data', 'error');
            }
        }

        async function createDefaultUserSettings() {
            const defaultSettings = {
                displayName: currentUser.email.split('@')[0],
                theme: 'dark',
                role: 'user',
                plan: 'basic',
                notifications: true,
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            };

            await db.collection('users').doc(currentUser.uid).set(defaultSettings);
            return defaultSettings;
        }

        // Dashboard initialization
        async function initializeDashboard() {
            await Promise.all([
                loadDashboardStats(),
                loadRecentActivity()
            ]);
            initializeEventListeners();
        }

        // Stats loading
        async function loadDashboardStats() {
            try {
                const stats = await calculateUserStats();
                updateDashboardStats(stats);
            } catch (error) {
                console.error('Error loading stats:', error);
                showToast('Error loading dashboard statistics', 'error');
            }
        }

        async function calculateUserStats() {
            const projectsSnapshot = await db.collection('projects')
                .where('userId', '==', currentUser.uid)
                .get();

            let activeCount = 0;
            let totalRenderTime = 0;
            let totalStorage = 0;
            let completedCount = 0;

            projectsSnapshot.forEach(doc => {
                const project = doc.data();
                if (project.status === 'active') activeCount++;
                if (project.status === 'completed') {
                    completedCount++;
                    totalRenderTime += project.renderTime || 0;
                }
                totalStorage += project.storageSize || 0;
            });

            return {
                activeProjects: activeCount,
                avgRenderTime: completedCount ? totalRenderTime / completedCount : 0,
                storageUsed: totalStorage
            };
        }

        // Activity tracking
        async function loadRecentActivity() {
            try {
                const activitySnapshot = await db.collection('activity')
                    .where('userId', '==', currentUser.uid)
                    .orderBy('timestamp', 'desc')
                    .limit(5)
                    .get();

                const activityList = document.getElementById('activityList');
                activityList.innerHTML = '';

                activitySnapshot.forEach(doc => {
                    const activity = doc.data();
                    const activityItem = createActivityItem(activity);
                    activityList.appendChild(activityItem);
                });
            } catch (error) {
                console.error('Error loading activity:', error);
                showToast('Error loading activity', 'error');
            }
        }

        // UI Updates
        function updateUIWithUserData() {
            document.getElementById('userName').textContent = userSettings.displayName;
            document.getElementById('userPlan').textContent = `${userSettings.plan} Plan`;
            
            if (userSettings.photoURL) {
                document.getElementById('userAvatar').src = userSettings.photoURL;
            }
        }

        function updateDashboardStats(stats) {
            document.getElementById('activeProjects').textContent = stats.activeProjects;
            document.getElementById('renderTime').textContent = formatTime(stats.avgRenderTime);
            document.getElementById('storageUsed').textContent = formatStorage(stats.storageUsed);
        }

        // Utility Functions
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            
            document.getElementById('toastContainer').appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        function formatTime(ms) {
            if (ms < 1000) return `${ms}ms`;
            if (ms < 60000) return `${(ms / 1000).toFixed(1)}s`;
            return `${(ms / 60000).toFixed(1)}m`;
        }

        function formatStorage(bytes) {
            const sizes = ['B', 'KB', 'MB', 'GB'];
            let i = 0;
            while (bytes >= 1024 && i < sizes.length - 1) {
                bytes /= 1024;
                i++;
            }
            return `${bytes.toFixed(1)}${sizes[i]}`;
        }

        // Event handlers
        function signOut() {
            auth.signOut()
                .then(() => window.location.href = '/login.html')
                .catch(error => showToast('Error signing out', 'error'));
        }

        function showSettings() {
            // Implementation
            console.log('Show settings');
        }

        function showNotifications() {
            // Implementation
            console.log('Show notifications');
        }

        function newProject() {
            // Implementation
            console.log('New project');
        }

        function importModel() {
            // Implementation
            console.log('Import model');
        }

        function showTutorial() {
            // Implementation
            console.log('Show tutorial');
        }

        function toggleUserMenu() {
            // Implementation
            console.log('Toggle user menu');
        }
    </script>
</body>
</html>
