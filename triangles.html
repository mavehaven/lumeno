<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Understanding Trigonometry: From Angles to Identities</title>
  <!-- MathJax for rendering LaTeX -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    :root {
      --primary-color: #3498db;
      --secondary-color: #2c3e50;
      --accent-color: #e74c3c;
      --light-color: #ecf0f1;
      --dark-color: #2c3e50;
      --success-color: #2ecc71;
      --warning-color: #f39c12;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #333;
      background-color: #f8f9fa;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    h1, h2, h3 {
      color: var(--secondary-color);
      margin-bottom: 15px;
    }
    
    h1 {
      text-align: center;
      border-bottom: 3px solid var(--primary-color);
      padding-bottom: 15px;
      margin-bottom: 30px;
    }
    
    .section {
      background-color: white;
      border-radius: 10px;
      padding: 25px;
      margin-bottom: 25px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }
    
    .section:hover {
      transform: translateY(-5px);
    }
    
    .explanation {
      background-color: var(--light-color);
      border-left: 4px solid var(--primary-color);
      padding: 15px;
      margin: 15px 0;
      border-radius: 0 8px 8px 0;
    }
    
    .real-world {
      background-color: #e8f4fd;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
    }
    
    .real-world h4 {
      color: var(--primary-color);
      margin-bottom: 10px;
    }
    
    .step-by-step {
      background-color: #fff5e6;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
    }
    
    .step-by-step h4 {
      color: var(--warning-color);
      margin-bottom: 10px;
    }
    
    .formula {
      text-align: center;
      font-size: 1.2em;
      margin: 15px 0;
      padding: 10px;
      background-color: var(--light-color);
      border-radius: 8px;
    }
    
    .canvas-container {
      margin: 20px 0;
      text-align: center;
      position: relative;
    }
    
    canvas {
      border: 1px solid #ddd;
      background-color: white;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      max-width: 100%;
    }
    
    .controls {
      margin: 15px 0;
      padding: 15px;
      background-color: var(--light-color);
      border-radius: 8px;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
    }
    
    .calculations {
      margin: 15px 0;
      padding: 15px;
      background-color: #e9ecef;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 1.1em;
    }
    
    button {
      padding: 10px 18px;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
    }
    
    button:hover {
      background-color: #2980b9;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    .slider-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .slider {
      width: 150px;
    }
    
    .concept {
      display: none;
    }
    
    .concept.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .navigation {
      text-align: center;
      margin: 25px 0;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .navigation button {
      background-color: var(--secondary-color);
    }
    
    .navigation button:hover {
      background-color: #1a252f;
    }
    
    .progress-bar {
      height: 5px;
      background-color: #e0e0e0;
      border-radius: 5px;
      margin: 10px 0;
      overflow: hidden;
    }
    
    .progress {
      height: 100%;
      background-color: var(--primary-color);
      width: 0%;
      transition: width 0.5s ease;
    }
    
    .tooltip {
      position: relative;
      display: inline-block;
      border-bottom: 1px dotted var(--primary-color);
      cursor: help;
    }
    
    .tooltip .tooltiptext {
      visibility: hidden;
      width: 200px;
      background-color: var(--secondary-color);
      color: white;
      text-align: center;
      border-radius: 6px;
      padding: 10px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -100px;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }
    
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
    }
    
    .comparison-table th, .comparison-table td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }
    
    .comparison-table th {
      background-color: var(--primary-color);
      color: white;
    }
    
    .comparison-table tr:nth-child(even) {
      background-color: #f2f2f2;
    }
    
    input[type="text"], select {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 1em;
    }
    
    .fundamental-concept {
      background-color: #e8f8f5;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
    }
    
    .fundamental-concept h4 {
      color: #16a085;
      margin-bottom: 10px;
    }
    
    .identity-table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
    }
    
    .identity-table th, .identity-table td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }
    
    .identity-table th {
      background-color: var(--primary-color);
      color: white;
    }
    
    @media (max-width: 768px) {
      .controls {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .slider-container {
        width: 100%;
        justify-content: space-between;
      }
      
      .slider {
        width: 70%;
      }
    }
  </style>
</head>
<body>
  <h1>Understanding Trigonometry: From Angles to Identities</h1>
  <p style="text-align: center; font-size: 1.1em; margin-bottom: 20px;">
    A comprehensive guide exploring trigonometric concepts from basic angles to identities with interactive examples, real-world applications, and step-by-step explanations.
  </p>
  
  <div class="progress-bar">
    <div class="progress" id="progressBar"></div>
  </div>
  
  <div class="navigation">
    <button onclick="showConcept('introduction')">Introduction</button>
    <button onclick="showConcept('angles')">Angles & Triangles</button>
    <button onclick="showConcept('unit-circle')">Unit Circle</button>
    <button onclick="showConcept('functions')">Trig Functions</button>
    <button onclick="showConcept('identities')">Identities</button>
    <button onclick="showConcept('applications')">Applications</button>
    <button onclick="showConcept('practice')">Practice Problems</button>
  </div>

  <!-- Introduction Section -->
  <div id="introduction" class="concept section active">
    <h2>Introduction to Trigonometry</h2>
    <p>Trigonometry is the branch of mathematics that studies relationships between side lengths and angles of triangles. The word "trigonometry" comes from the Greek words "trigonon" (triangle) and "metron" (measure).</p>
    
    <div class="explanation">
      <h3>Why Study Trigonometry?</h3>
      <p>Trigonometry helps us understand:</p>
      <ul>
        <li>How to calculate unknown sides or angles in triangles</li>
        <li>Periodic phenomena like sound waves, light waves, and tides</li>
        <li>Navigation, astronomy, and geography</li>
        <li>Engineering, architecture, and computer graphics</li>
      </ul>
    </div>
    
    <div class="real-world">
      <h4>Real-World Applications</h4>
      <p>Trigonometry is used in:</p>
      <ul>
        <li><strong>Engineering:</strong> Designing structures, calculating forces</li>
        <li><strong>Physics:</strong> Analyzing wave motion, projectile trajectories</li>
        <li><strong>Astronomy:</strong> Measuring distances between celestial bodies</li>
        <li><strong>Navigation:</strong> GPS systems, aviation, maritime navigation</li>
        <li><strong>Computer Graphics:</strong> 3D modeling, animation, game development</li>
        <li><strong>Music:</strong> Sound wave analysis and synthesis</li>
      </ul>
    </div>
    
    <div class="step-by-step">
      <h4>What You'll Learn</h4>
      <p>This tutorial will guide you through:</p>
      <ol>
        <li>Understanding angles, triangles, and the Pythagorean theorem</li>
        <li>Exploring the unit circle and radian measure</li>
        <li>Learning the six trigonometric functions</li>
        <li>Graphing trigonometric functions</li>
        <li>Applying trigonometric identities</li>
        <li>Solving real-world problems using trigonometry</li>
      </ol>
    </div>
    
    <div class="formula">
      The Pythagorean theorem: 
      \[ a^2 + b^2 = c^2 \]
    </div>
  </div>

  <!-- Angles & Triangles Section -->
  <div id="angles" class="concept section">
    <h2>Angles and Triangles</h2>
    <p>
      Triangles are fundamental geometric shapes with three sides and three angles. The sum of the interior angles of any triangle is always 180°.
    </p>
    
    <div class="formula">
      \[ \text{Sum of angles in a triangle} = 180^\circ \]
    </div>
    
    <div class="explanation">
      <h3>Types of Triangles</h3>
      <ul>
        <li><strong>Equilateral:</strong> All sides equal, all angles 60°</li>
        <li><strong>Isosceles:</strong> Two sides equal, two angles equal</li>
        <li><strong>Scalene:</strong> All sides and angles different</li>
        <li><strong>Right:</strong> One angle is 90°</li>
        <li><strong>Acute:</strong> All angles less than 90°</li>
        <li><strong>Obtuse:</strong> One angle greater than 90°</li>
      </ul>
    </div>
    
    <div class="controls">
      <div class="slider-container">
        <label>Angle A: </label>
        <input type="range" min="1" max="179" value="45" class="slider" id="angleASlider">
        <span id="angleAValue">45°</span>
      </div>
      <div class="slider-container">
        <label>Angle B: </label>
        <input type="range" min="1" max="179" value="45" class="slider" id="angleBSlider">
        <span id="angleBValue">45°</span>
      </div>
      <button onclick="resetTriangle()">Reset to Right Triangle</button>
    </div>
    
    <div class="calculations" id="triangleCalculations">
      <div>Angle A: <span id="angleA">45</span>°</div>
      <div>Angle B: <span id="angleB">45</span>°</div>
      <div>Angle C: <span id="angleC">90</span>°</div>
      <div>Triangle Type: <span id="triangleType">Right Isosceles</span></div>
    </div>
    
    <div class="canvas-container">
      <canvas id="triangleCanvas" width="500" height="350"></canvas>
    </div>
    
    <div class="step-by-step">
      <h4>Step-by-Step: Solving Right Triangles</h4>
      <ol>
        <li>Identify the right angle (90°)</li>
        <li>Use the fact that the sum of angles is 180° to find the third angle</li>
        <li>Apply the Pythagorean theorem to find unknown sides</li>
        <li>Use trigonometric ratios (SOH-CAH-TOA) to find missing sides or angles</li>
      </ol>
    </div>
    
    <div class="real-world">
      <h4>Real-World Example: Height Measurement</h4>
      <p>If you know your distance from a tree and the angle of elevation to the top, you can use trigonometry to calculate the tree's height.</p>
    </div>
  </div>

  <!-- Unit Circle Section -->
  <div id="unit-circle" class="concept section">
    <h2>The Unit Circle</h2>
    <p>
      The unit circle is a circle with a radius of 1 centered at the origin of the coordinate plane. It's fundamental to understanding trigonometric functions.
    </p>
    
    <div class="formula">
      \[ x^2 + y^2 = 1 \]
    </div>
    
    <div class="explanation">
      <h3>Key Points on the Unit Circle</h3>
      <ul>
        <li>At 0° (0 radians): (1, 0)</li>
        <li>At 90° (π/2 radians): (0, 1)</li>
        <li>At 180° (π radians): (-1, 0)</li>
        <li>At 270° (3π/2 radians): (0, -1)</li>
        <li>At 30° (π/6 radians): (√3/2, 1/2)</li>
        <li>At 45° (π/4 radians): (√2/2, √2/2)</li>
        <li>At 60° (π/3 radians): (1/2, √3/2)</li>
      </ul>
    </div>
    
    <div class="controls">
      <div class="slider-container">
        <label>Angle: </label>
        <input type="range" min="0" max="360" value="45" class="slider" id="angleSlider">
        <span id="angleValue">45°</span>
      </div>
      <select id="angleMode">
        <option value="degrees">Degrees</option>
        <option value="radians">Radians</option>
      </select>
      <button onclick="showSpecialAngles()">Show Special Angles</button>
    </div>
    
    <div class="calculations" id="unitCircleCalculations">
      <div>Angle: <span id="angleDisplay">45°</span> (<span id="radianDisplay">0.785</span> radians)</div>
      <div>Coordinates: (<span id="xCoord">0.707</span>, <span id="yCoord">0.707</span>)</div>
      <div>sin(θ) = <span id="sinValue">0.707</span></div>
      <div>cos(θ) = <span id="cosValue">0.707</span></div>
      <div>tan(θ) = <span id="tanValue">1.000</span></div>
    </div>
    
    <div class="canvas-container">
      <canvas id="unitCircleCanvas" width="500" height="500"></canvas>
    </div>
    
    <div class="step-by-step">
      <h4>Step-by-Step: Using the Unit Circle</h4>
      <ol>
        <li>Start at the positive x-axis (angle = 0)</li>
        <li>Move counterclockwise by the given angle</li>
        <li>The x-coordinate of the point is cos(θ)</li>
        <li>The y-coordinate of the point is sin(θ)</li>
        <li>tan(θ) = sin(θ)/cos(θ)</li>
      </ol>
    </div>
  </div>

  <!-- Trigonometric Functions Section -->
  <div id="functions" class="concept section">
    <h2>Trigonometric Functions</h2>
    <p>
      The six trigonometric functions relate angles of a right triangle to ratios of its sides. They are defined for all real numbers using the unit circle.
    </p>
    
    <div class="formula">
      \[ \sin(\theta) = \frac{\text{opposite}}{\text{hypotenuse}}, \quad 
         \cos(\theta) = \frac{\text{adjacent}}{\text{hypotenuse}}, \quad 
         \tan(\theta) = \frac{\text{opposite}}{\text{adjacent}} \]
    </div>
    
    <div class="explanation">
      <h3>The Six Trigonometric Functions</h3>
      <table class="comparison-table">
        <tr>
          <th>Function</th>
          <th>Definition</th>
          <th>Reciprocal</th>
        </tr>
        <tr>
          <td>Sine (sin)</td>
          <td>opposite/hypotenuse</td>
          <td>Cosecant (csc) = 1/sin</td>
        </tr>
        <tr>
          <td>Cosine (cos)</td>
          <td>adjacent/hypotenuse</td>
          <td>Secant (sec) = 1/cos</td>
        </tr>
        <tr>
          <td>Tangent (tan)</td>
          <td>opposite/adjacent</td>
          <td>Cotangent (cot) = 1/tan</td>
        </tr>
      </table>
    </div>
    
    <div class="controls">
      <div class="slider-container">
        <label>Angle: </label>
        <input type="range" min="0" max="360" value="30" class="slider" id="functionAngleSlider">
        <span id="functionAngleValue">30°</span>
      </div>
      <select id="functionSelect">
        <option value="sine">Sine</option>
        <option value="cosine">Cosine</option>
        <option value="tangent">Tangent</option>
        <option value="all">All Functions</option>
      </select>
      <button onclick="showSohCahToa()">Show SOH-CAH-TOA</button>
    </div>
    
    <div class="calculations" id="functionCalculations">
      <div>Angle: <span id="functionAngle">30</span>°</div>
      <div>sin(<span id="angleForSin">30</span>°) = <span id="sinFunctionValue">0.500</span></div>
      <div>cos(<span id="angleForCos">30</span>°) = <span id="cosFunctionValue">0.866</span></div>
      <div>tan(<span id="angleForTan">30</span>°) = <span id="tanFunctionValue">0.577</span></div>
    </div>
    
    <div class="canvas-container">
      <canvas id="functionCanvas" width="500" height="350"></canvas>
    </div>
    
    <div class="step-by-step">
      <h4>Step-by-Step: SOH-CAH-TOA</h4>
      <ol>
        <li><strong>SOH:</strong> Sine = Opposite / Hypotenuse</li>
        <li><strong>CAH:</strong> Cosine = Adjacent / Hypotenuse</li>
        <li><strong>TOA:</strong> Tangent = Opposite / Adjacent</li>
        <li>Identify the angle you're working with</li>
        <li>Label the sides relative to that angle</li>
        <li>Apply the appropriate ratio</li>
      </ol>
    </div>
    
    <div class="real-world">
      <h4>Real-World Example: Ramp Design</h4>
      <p>When designing a ramp, the tangent function helps determine the appropriate incline based on the height and length requirements.</p>
    </div>
  </div>

  <!-- Graphs Section -->
  <div id="graphs" class="concept section">
    <h2>Graphs of Trigonometric Functions</h2>
    <p>
      Trigonometric functions are periodic, meaning they repeat their values in regular intervals. Understanding their graphs helps visualize their behavior.
    </p>
    
    <div class="formula">
      \[ y = A \sin(Bx + C) + D \]
      Where A = amplitude, B affects period, C = phase shift, D = vertical shift
    </div>
    
    <div class="explanation">
      <h3>Key Features of Trigonometric Graphs</h3>
      <ul>
        <li><strong>Amplitude:</strong> The height from the midline to the peak</li>
        <li><strong>Period:</strong> The horizontal length of one complete cycle</li>
        <li><strong>Frequency:</strong> The number of cycles in a given interval</li>
        <li><strong>Phase Shift:</strong> Horizontal translation of the graph</li>
        <li><strong>Vertical Shift:</strong> Upward or downward translation</li>
      </ul>
    </div>
    
    <div class="controls">
      <div class="slider-container">
        <label>Amplitude: </label>
        <input type="range" min="1" max="5" value="1" step="0.1" class="slider" id="amplitudeSlider">
        <span id="amplitudeValue">1</span>
      </div>
      <div class="slider-container">
        <label>Frequency: </label>
        <input type="range" min="1" max="5" value="1" step="0.1" class="slider" id="frequencySlider">
        <span id="frequencyValue">1</span>
      </div>
      <div class="slider-container">
        <label>Phase Shift: </label>
        <input type="range" min="-3.14" max="3.14" value="0" step="0.1" class="slider" id="phaseSlider">
        <span id="phaseValue">0</span>
      </div>
      <div class="slider-container">
        <label>Vertical Shift: </label>
        <input type="range" min="-2" max="2" value="0" step="0.1" class="slider" id="verticalSlider">
        <span id="verticalValue">0</span>
      </div>
      <select id="graphFunction">
        <option value="sine">Sine</option>
        <option value="cosine">Cosine</option>
        <option value="tangent">Tangent</option>
      </select>
    </div>
    
    <div class="calculations" id="graphCalculations">
      <div>Function: <span id="graphFunctionName">sin(x)</span></div>
      <div>Amplitude: <span id="graphAmplitude">1</span></div>
      <div>Period: <span id="graphPeriod">6.283</span></div>
      <div>Phase Shift: <span id="graphPhase">0</span></div>
      <div>Vertical Shift: <span id="graphVertical">0</span></div>
    </div>
    
    <div class="canvas-container">
      <canvas id="graphCanvas" width="500" height="350"></canvas>
    </div>
    
    <div class="step-by-step">
      <h4>Step-by-Step: Graphing Trigonometric Functions</h4>
      <ol>
        <li>Identify the amplitude (A)</li>
        <li>Calculate the period using: Period = 2π/B</li>
        <li>Determine the phase shift: -C/B</li>
        <li>Identify the vertical shift (D)</li>
        <li>Plot key points (zeros, maxima, minima)</li>
        <li>Connect points with a smooth curve</li>
      </ol>
    </div>
  </div>

  <!-- Identities Section -->
  <div id="identities" class="concept section">
    <h2>Trigonometric Identities</h2>
    <p>
      Trigonometric identities are equations that are true for all values of the variables. They are useful for simplifying expressions and solving equations.
    </p>
    
    <div class="formula">
      Pythagorean Identity: \[ \sin^2(\theta) + \cos^2(\theta) = 1 \]
    </div>
    
    <div class="explanation">
      <h3>Fundamental Trigonometric Identities</h3>
      <table class="identity-table">
        <tr>
          <th>Category</th>
          <th>Identity</th>
        </tr>
        <tr>
          <td>Reciprocal</td>
          <td>\[ \csc(\theta) = \frac{1}{\sin(\theta)}, \quad \sec(\theta) = \frac{1}{\cos(\theta)}, \quad \cot(\theta) = \frac{1}{\tan(\theta)} \]</td>
        </tr>
        <tr>
          <td>Quotient</td>
          <td>\[ \tan(\theta) = \frac{\sin(\theta)}{\cos(\theta)}, \quad \cot(\theta) = \frac{\cos(\theta)}{\sin(\theta)} \]</td>
        </tr>
        <tr>
          <td>Pythagorean</td>
          <td>\[ \sin^2(\theta) + \cos^2(\theta) = 1, \quad 1 + \tan^2(\theta) = \sec^2(\theta), \quad 1 + \cot^2(\theta) = \csc^2(\theta) \]</td>
        </tr>
        <tr>
          <td>Even/Odd</td>
          <td>\[ \sin(-\theta) = -\sin(\theta), \quad \cos(-\theta) = \cos(\theta), \quad \tan(-\theta) = -\tan(\theta) \]</td>
        </tr>
        <tr>
          <td>Angle Sum/Difference</td>
          <td>\[ \sin(A \pm B) = \sin A \cos B \pm \cos A \sin B \]</td>
        </tr>
        <tr>
          <td>Double Angle</td>
          <td>\[ \sin(2\theta) = 2\sin\theta\cos\theta, \quad \cos(2\theta) = \cos^2\theta - \sin^2\theta \]</td>
        </tr>
      </table>
    </div>
    
    <div class="controls">
      <select id="identityType">
        <option value="pythagorean">Pythagorean Identity</option>
        <option value="angleSum">Angle Sum Identity</option>
        <option value="doubleAngle">Double Angle Identity</option>
      </select>
      <div class="slider-container">
        <label>Angle: </label>
        <input type="range" min="0" max="90" value="30" class="slider" id="identityAngleSlider">
        <span id="identityAngleValue">30°</span>
      </div>
      <button onclick="verifyIdentity()">Verify Identity</button>
    </div>
    
    <div class="calculations" id="identityCalculations">
      <div>Identity: <span id="identityDisplay">sin²(θ) + cos²(θ) = 1</span></div>
      <div>Left Side: <span id="leftSide">1.000</span></div>
      <div>Right Side: <span id="rightSide">1.000</span></div>
      <div>Verification: <span id="verificationResult">Identity holds true</span></div>
    </div>
    
    <div class="canvas-container">
      <canvas id="identityCanvas" width="500" height="350"></canvas>
    </div>
    
    <div class="step-by-step">
      <h4>Step-by-Step: Proving Trigonometric Identities</h4>
      <ol>
        <li>Start with one side of the equation (usually the more complex side)</li>
        <li>Use known identities to rewrite expressions</li>
        <li>Simplify step by step</li>
        <li>Aim to match the other side of the equation</li>
        <li>If both sides match, the identity is proven</li>
      </ol>
    </div>
  </div>

  <!-- Applications Section -->
  <div id="applications" class="concept section">
    <h2>Applications of Trigonometry</h2>
    <p>Trigonometry has numerous practical applications across various fields. Let's explore some key applications.</p>
    
    <div class="explanation">
      <h3>Right Triangle Applications</h3>
      <p>Trigonometry is commonly used to solve problems involving right triangles:</p>
      
      <div class="controls">
        <select id="applicationType" onchange="showApplication()">
          <option value="height">Height Measurement</option>
          <option value="distance">Distance Calculation</option>
          <option value="navigation">Navigation</option>
          <option value="waves">Wave Motion</option>
        </select>
      </div>
      
      <div class="canvas-container">
        <canvas id="applicationCanvas" width="500" height="350"></canvas>
      </div>
      
      <div id="applicationExplanation" class="calculations">
        <p><strong>Height Measurement:</strong> If you know the distance to an object and the angle of elevation, you can calculate its height using the tangent function: height = distance × tan(angle).</p>
      </div>
    </div>
    
    <div class="real-world">
      <h3>Periodic Phenomena</h3>
      <p>Trigonometric functions model periodic phenomena like sound waves, light waves, and seasonal patterns.</p>
      
      <div class="controls">
        <select id="waveType" onchange="showWaveApplication()">
          <option value="sound">Sound Waves</option>
          <option value="light">Light Waves</option>
          <option value="tides">Ocean Tides</option>
        </select>
      </div>
      
      <div class="canvas-container">
        <canvas id="waveCanvas" width="500" height="350"></canvas>
      </div>
      
      <div id="waveExplanation" class="calculations">
        <p><strong>Sound Waves:</strong> Sound can be modeled as a sine wave: y = A sin(2πft), where A is amplitude, f is frequency, and t is time.</p>
      </div>
    </div>
    
    <div class="step-by-step">
      <h3>Engineering and Physics</h3>
      <p>In physics and engineering, trigonometry is used to analyze forces, motion, and structures.</p>
      
      <div class="controls">
        <select id="physicsType" onchange="showPhysicsApplication()">
          <option value="projectile">Projectile Motion</option>
          <option value="forces">Force Analysis</option>
          <option value="circuits">AC Circuits</option>
        </select>
      </div>
      
      <div id="physicsExplanation" class="calculations">
        <p><strong>Projectile Motion:</strong> The horizontal and vertical components of projectile motion can be analyzed using trigonometric functions. The initial velocity components are: v_x = v cos(θ), v_y = v sin(θ).</p>
      </div>
    </div>
  </div>

  <!-- Practice Problems Section -->
  <div id="practice" class="concept section">
    <h2>Practice Problems</h2>
    <p>Test your understanding with these practice problems. Try to solve them on your own before checking the solution!</p>
    
    <div class="controls">
      <button onclick="changeProblemType('triangles')">Triangle Problems</button>
      <button onclick="changeProblemType('unit-circle')">Unit Circle Problems</button>
      <button onclick="changeProblemType('identities')">Identity Problems</button>
      <button onclick="changeProblemType('applications')">Application Problems</button>
    </div>
    
    <div class="section" id="problemContainer">
      <h3 id="problemTitle">Triangle Problems</h3>
      <div id="currentProblem" class="calculations"></div>
      <div class="controls">
        <input type="text" id="userAnswer" placeholder="Enter your answer">
        <button onclick="checkAnswer()">Check Answer</button>
        <button onclick="showSolution()">Show Solution</button>
        <button onclick="nextProblem()">Next Problem</button>
        <button onclick="hint()">Hint</button>
      </div>
      <div id="hint" class="calculations" style="display: none;"></div>
      <div id="feedback" class="calculations" style="display: none;"></div>
      <div id="solution" class="calculations" style="display: none;"></div>
    </div>
    
    <div class="real-world">
      <h3>Challenge Problems</h3>
      <p>For those who want an extra challenge:</p>
      <div id="challengeProblems" class="calculations">
        <p><strong>1.</strong> A 20-foot ladder leans against a building. If the base of the ladder is 8 feet from the building, what angle does the ladder make with the ground?</p>
        <p><strong>2.</strong> Prove the identity: sin(3θ) = 3sin(θ) - 4sin³(θ)</p>
        <p><strong>3.</strong> A Ferris wheel with a radius of 50 feet completes one revolution every 2 minutes. Write an equation for the height of a rider above ground as a function of time, assuming the rider boards at the bottom position.</p>
      </div>
    </div>
  </div>

  <script>
    // Update progress bar based on current section
    const sections = ['introduction', 'angles', 'unit-circle', 'functions', 'graphs', 'identities', 'applications', 'practice'];
    
    function updateProgressBar() {
      const currentSection = document.querySelector('.concept.active').id;
      const currentIndex = sections.indexOf(currentSection);
      const progress = (currentIndex / (sections.length - 1)) * 100;
      document.getElementById('progressBar').style.width = `${progress}%`;
    }
    
    // Helper function to update MathJax rendering.
    function updateMath() {
      if (window.MathJax && MathJax.typesetPromise) {
        MathJax.typesetPromise();
      }
    }

    // Get canvas contexts for drawing
    const triangleCtx = document.getElementById('triangleCanvas').getContext('2d');
    const unitCircleCtx = document.getElementById('unitCircleCanvas').getContext('2d');
    const functionCtx = document.getElementById('functionCanvas').getContext('2d');
    const graphCtx = document.getElementById('graphCanvas').getContext('2d');
    const identityCtx = document.getElementById('identityCanvas').getContext('2d');
    const applicationCtx = document.getElementById('applicationCanvas').getContext('2d');
    const waveCtx = document.getElementById('waveCanvas').getContext('2d');

    // Utility functions for coordinate transformation
    function transformX(x, canvas) {
      return canvas.width / 2 + x * 20;
    }
    
    function transformY(y, canvas) {
      return canvas.height / 2 - y * 20;
    }

    // Draw coordinate system on a given canvas context
    function drawCoordinateSystem(ctx) {
      const canvas = ctx.canvas;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.beginPath();
      // Draw x-axis
      ctx.moveTo(0, canvas.height / 2);
      ctx.lineTo(canvas.width, canvas.height / 2);
      // Draw y-axis
      ctx.moveTo(canvas.width / 2, 0);
      ctx.lineTo(canvas.width / 2, canvas.height);
      ctx.strokeStyle = '#000';
      ctx.stroke();

      // Draw grid lines
      ctx.strokeStyle = '#ddd';
      ctx.beginPath();
      for (let x = -10; x <= 10; x++) {
        if (x === 0) continue;
        const screenX = transformX(x, canvas);
        ctx.moveTo(screenX, 0);
        ctx.lineTo(screenX, canvas.height);
      }
      for (let y = -7; y <= 7; y++) {
        if (y === 0) continue;
        const screenY = transformY(y, canvas);
        ctx.moveTo(0, screenY);
        ctx.lineTo(canvas.width, screenY);
      }
      ctx.stroke();
      
      // Label axes
      ctx.fillStyle = '#000';
      ctx.font = '12px Arial';
      ctx.fillText('x', canvas.width - 10, canvas.height / 2 - 10);
      ctx.fillText('y', canvas.width / 2 + 10, 10);
    }

    // ANGLES & TRIANGLES SECTION
    function updateTriangle() {
      const angleA = parseInt(document.getElementById('angleASlider').value);
      const angleB = parseInt(document.getElementById('angleBSlider').value);
      const angleC = 180 - angleA - angleB;
      
      document.getElementById('angleAValue').textContent = `${angleA}°`;
      document.getElementById('angleBValue').textContent = `${angleB}°`;
      document.getElementById('angleA').textContent = angleA;
      document.getElementById('angleB').textContent = angleB;
      document.getElementById('angleC').textContent = angleC;
      
      // Determine triangle type
      let triangleType = '';
      if (angleA === 90 || angleB === 90 || angleC === 90) {
        triangleType = 'Right ';
      } else if (angleA > 90 || angleB > 90 || angleC > 90) {
        triangleType = 'Obtuse ';
      } else {
        triangleType = 'Acute ';
      }
      
      if (angleA === angleB && angleB === angleC) {
        triangleType += 'Equilateral';
      } else if (angleA === angleB || angleA === angleC || angleB === angleC) {
        triangleType += 'Isosceles';
      } else {
        triangleType += 'Scalene';
      }
      
      document.getElementById('triangleType').textContent = triangleType;
      
      // Draw triangle
      const canvas = triangleCtx.canvas;
      triangleCtx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Draw coordinate system
      drawCoordinateSystem(triangleCtx);
      
      // Draw triangle (simplified representation)
      const baseLength = 200;
      const height = baseLength * Math.tan(angleA * Math.PI / 180);
      
      const x1 = canvas.width / 2 - baseLength / 2;
      const y1 = canvas.height / 2 + 50;
      const x2 = canvas.width / 2 + baseLength / 2;
      const y2 = canvas.height / 2 + 50;
      const x3 = canvas.width / 2 - baseLength / 2;
      const y3 = canvas.height / 2 + 50 - height;
      
      triangleCtx.beginPath();
      triangleCtx.moveTo(x1, y1);
      triangleCtx.lineTo(x2, y2);
      triangleCtx.lineTo(x3, y3);
      triangleCtx.closePath();
      triangleCtx.strokeStyle = '#3498db';
      triangleCtx.lineWidth = 2;
      triangleCtx.stroke();
      triangleCtx.fillStyle = 'rgba(52, 152, 219, 0.2)';
      triangleCtx.fill();
      
      // Label angles
      triangleCtx.fillStyle = '#000';
      triangleCtx.font = '14px Arial';
      triangleCtx.fillText(`${angleA}°`, x1 - 20, y1 - 10);
      triangleCtx.fillText(`${angleB}°`, x2 + 10, y2 - 10);
      triangleCtx.fillText(`${angleC}°`, x3 - 10, y3 - 20);
      
      // Label sides
      triangleCtx.fillText('a', (x1 + x2) / 2, y1 + 20);
      triangleCtx.fillText('b', (x1 + x3) / 2 - 10, (y1 + y3) / 2);
      triangleCtx.fillText('c', (x2 + x3) / 2 + 10, (y2 + y3) / 2);
    }
    
    function resetTriangle() {
      document.getElementById('angleASlider').value = 45;
      document.getElementById('angleBSlider').value = 45;
      updateTriangle();
    }

    // UNIT CIRCLE SECTION
    function updateUnitCircle() {
      const angle = parseInt(document.getElementById('angleSlider').value);
      const angleMode = document.getElementById('angleMode').value;
      
      document.getElementById('angleValue').textContent = `${angle}°`;
      
      let radians, x, y;
      
      if (angleMode === 'degrees') {
        radians = angle * Math.PI / 180;
        document.getElementById('angleDisplay').textContent = `${angle}°`;
      } else {
        radians = angle;
        document.getElementById('angleDisplay').textContent = `${angle} radians`;
      }
      
      document.getElementById('radianDisplay').textContent = radians.toFixed(3);
      
      x = Math.cos(radians);
      y = Math.sin(radians);
      
      document.getElementById('xCoord').textContent = x.toFixed(3);
      document.getElementById('yCoord').textContent = y.toFixed(3);
      document.getElementById('sinValue').textContent = y.toFixed(3);
      document.getElementById('cosValue').textContent = x.toFixed(3);
      document.getElementById('tanValue').textContent = (y / x).toFixed(3);
      
      // Draw unit circle
      const canvas = unitCircleCtx.canvas;
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const radius = 150;
      
      unitCircleCtx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Draw circle
      unitCircleCtx.beginPath();
      unitCircleCtx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
      unitCircleCtx.strokeStyle = '#3498db';
      unitCircleCtx.lineWidth = 2;
      unitCircleCtx.stroke();
      
      // Draw axes
      unitCircleCtx.beginPath();
      unitCircleCtx.moveTo(centerX - radius - 20, centerY);
      unitCircleCtx.lineTo(centerX + radius + 20, centerY);
      unitCircleCtx.moveTo(centerX, centerY - radius - 20);
      unitCircleCtx.lineTo(centerX, centerY + radius + 20);
      unitCircleCtx.strokeStyle = '#000';
      unitCircleCtx.stroke();
      
      // Draw angle
      unitCircleCtx.beginPath();
      unitCircleCtx.moveTo(centerX, centerY);
      unitCircleCtx.lineTo(centerX + radius * Math.cos(radians), centerY - radius * Math.sin(radians));
      unitCircleCtx.strokeStyle = '#e74c3c';
      unitCircleCtx.lineWidth = 2;
      unitCircleCtx.stroke();
      
      // Draw point on circle
      unitCircleCtx.beginPath();
      unitCircleCtx.arc(centerX + radius * Math.cos(radians), centerY - radius * Math.sin(radians), 5, 0, 2 * Math.PI);
      unitCircleCtx.fillStyle = '#e74c3c';
      unitCircleCtx.fill();
      
      // Draw coordinates
      unitCircleCtx.fillStyle = '#000';
      unitCircleCtx.font = '14px Arial';
      unitCircleCtx.fillText(`(${x.toFixed(2)}, ${y.toFixed(2)})`, 
                            centerX + radius * Math.cos(radians) + 10, 
                            centerY - radius * Math.sin(radians) - 10);
      
      // Draw angle label
      unitCircleCtx.fillText(`${angle}°`, centerX + 30, centerY - 30);
      
      // Draw projections
      unitCircleCtx.beginPath();
      unitCircleCtx.moveTo(centerX + radius * Math.cos(radians), centerY - radius * Math.sin(radians));
      unitCircleCtx.lineTo(centerX + radius * Math.cos(radians), centerY);
      unitCircleCtx.strokeStyle = '#95a5a6';
      unitCircleCtx.setLineDash([5, 5]);
      unitCircleCtx.stroke();
      
      unitCircleCtx.beginPath();
      unitCircleCtx.moveTo(centerX + radius * Math.cos(radians), centerY - radius * Math.sin(radians));
      unitCircleCtx.lineTo(centerX, centerY - radius * Math.sin(radians));
      unitCircleCtx.stroke();
      unitCircleCtx.setLineDash([]);
      
      // Label cos and sin
      unitCircleCtx.fillText('cos(θ)', centerX + radius * Math.cos(radians) / 2, centerY + 20);
      unitCircleCtx.fillText('sin(θ)', centerX - 30, centerY - radius * Math.sin(radians) / 2);
    }
    
    function showSpecialAngles() {
      const specialAngles = [0, 30, 45, 60, 90, 120, 135, 150, 180, 210, 225, 240, 270, 300, 315, 330, 360];
      let currentIndex = 0;
      
      function animateSpecialAngles() {
        if (currentIndex < specialAngles.length) {
          document.getElementById('angleSlider').value = specialAngles[currentIndex];
          updateUnitCircle();
          currentIndex++;
          setTimeout(animateSpecialAngles, 1000);
        }
      }
      
      animateSpecialAngles();
    }

    // TRIGONOMETRIC FUNCTIONS SECTION
    function updateFunctions() {
      const angle = parseInt(document.getElementById('functionAngleSlider').value);
      const functionType = document.getElementById('functionSelect').value;
      
      document.getElementById('functionAngleValue').textContent = `${angle}°`;
      document.getElementById('functionAngle').textContent = angle;
      document.getElementById('angleForSin').textContent = angle;
      document.getElementById('angleForCos').textContent = angle;
      document.getElementById('angleForTan').textContent = angle;
      
      const radians = angle * Math.PI / 180;
      const sinValue = Math.sin(radians);
      const cosValue = Math.cos(radians);
      const tanValue = Math.tan(radians);
      
      document.getElementById('sinFunctionValue').textContent = sinValue.toFixed(3);
      document.getElementById('cosFunctionValue').textContent = cosValue.toFixed(3);
      document.getElementById('tanFunctionValue').textContent = tanValue.toFixed(3);
      
      // Draw triangle representation
      const canvas = functionCtx.canvas;
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      
      functionCtx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Draw coordinate system
      drawCoordinateSystem(functionCtx);
      
      // Draw triangle
      const hypotenuse = 150;
      const adjacent = hypotenuse * Math.cos(radians);
      const opposite = hypotenuse * Math.sin(radians);
      
      functionCtx.beginPath();
      functionCtx.moveTo(centerX, centerY);
      functionCtx.lineTo(centerX + adjacent, centerY);
      functionCtx.lineTo(centerX + adjacent, centerY - opposite);
      functionCtx.closePath();
      functionCtx.strokeStyle = '#3498db';
      functionCtx.lineWidth = 2;
      functionCtx.stroke();
      functionCtx.fillStyle = 'rgba(52, 152, 219, 0.2)';
      functionCtx.fill();
      
      // Draw angle arc
      functionCtx.beginPath();
      functionCtx.arc(centerX, centerY, 30, 0, radians, false);
      functionCtx.strokeStyle = '#e74c3c';
      functionCtx.stroke();
      
      // Label sides based on selected function
      functionCtx.fillStyle = '#000';
      functionCtx.font = '14px Arial';
      
      if (functionType === 'sine' || functionType === 'all') {
        functionCtx.fillText('opposite', centerX + adjacent + 5, centerY - opposite / 2);
        functionCtx.fillText(`sin(θ) = ${sinValue.toFixed(3)}`, centerX - 100, centerY - 100);
      }
      
      if (functionType === 'cosine' || functionType === 'all') {
        functionCtx.fillText('adjacent', centerX + adjacent / 2, centerY + 20);
        functionCtx.fillText(`cos(θ) = ${cosValue.toFixed(3)}`, centerX - 100, centerY - 70);
      }
      
      if (functionType === 'tangent' || functionType === 'all') {
        functionCtx.fillText('hypotenuse', centerX + adjacent / 2 - 20, centerY - opposite / 2);
        functionCtx.fillText(`tan(θ) = ${tanValue.toFixed(3)}`, centerX - 100, centerY - 40);
      }
      
      // Label angle
      functionCtx.fillText(`${angle}°`, centerX + 20, centerY + 20);
    }
    
    function showSohCahToa() {
      // Create a visual representation of SOH-CAH-TOA
      const canvas = functionCtx.canvas;
      functionCtx.clearRect(0, 0, canvas.width, canvas.height);
      
      functionCtx.fillStyle = '#000';
      functionCtx.font = '20px Arial';
      functionCtx.fillText('SOH-CAH-TOA', canvas.width / 2 - 70, 50);
      
      functionCtx.font = '16px Arial';
      functionCtx.fillText('SOH: Sine = Opposite / Hypotenuse', canvas.width / 2 - 150, 100);
      functionCtx.fillText('CAH: Cosine = Adjacent / Hypotenuse', canvas.width / 2 - 150, 130);
      functionCtx.fillText('TOA: Tangent = Opposite / Adjacent', canvas.width / 2 - 150, 160);
      
      // Draw a sample triangle
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2 + 50;
      
      functionCtx.beginPath();
      functionCtx.moveTo(centerX, centerY);
      functionCtx.lineTo(centerX + 100, centerY);
      functionCtx.lineTo(centerX + 100, centerY - 70);
      functionCtx.closePath();
      functionCtx.strokeStyle = '#3498db';
      functionCtx.lineWidth = 2;
      functionCtx.stroke();
      
      // Label sides
      functionCtx.fillText('O', centerX + 110, centerY - 35);
      functionCtx.fillText('A', centerX + 50, centerY + 20);
      functionCtx.fillText('H', centerX + 50, centerY - 35);
      
      // Label angle
      functionCtx.beginPath();
      functionCtx.arc(centerX, centerY, 20, 0, Math.atan(70/100), false);
      functionCtx.strokeStyle = '#e74c3c';
      functionCtx.stroke();
      functionCtx.fillText('θ', centerX + 15, centerY + 15);
    }

    // GRAPHS SECTION - FIXED
    function updateGraphs() {
      const amplitude = parseFloat(document.getElementById('amplitudeSlider').value);
      const frequency = parseFloat(document.getElementById('frequencySlider').value);
      const phase = parseFloat(document.getElementById('phaseSlider').value);
      const vertical = parseFloat(document.getElementById('verticalSlider').value);
      const graphFunction = document.getElementById('graphFunction').value;
      
      document.getElementById('amplitudeValue').textContent = amplitude;
      document.getElementById('frequencyValue').textContent = frequency;
      document.getElementById('phaseValue').textContent = phase;
      document.getElementById('verticalValue').textContent = vertical;
      
      document.getElementById('graphAmplitude').textContent = amplitude;
      document.getElementById('graphFrequency').textContent = frequency;
      document.getElementById('graphPhase').textContent = phase;
      document.getElementById('graphVertical').textContent = vertical;
      
      const period = 2 * Math.PI / frequency;
      document.getElementById('graphPeriod').textContent = period.toFixed(3);
      
      let functionName = '';
      switch(graphFunction) {
        case 'sine':
          functionName = 'sin(x)';
          document.getElementById('graphFunctionName').textContent = `${amplitude} sin(${frequency}x + ${phase}) + ${vertical}`;
          break;
        case 'cosine':
          functionName = 'cos(x)';
          document.getElementById('graphFunctionName').textContent = `${amplitude} cos(${frequency}x + ${phase}) + ${vertical}`;
          break;
        case 'tangent':
          functionName = 'tan(x)';
          document.getElementById('graphFunctionName').textContent = `${amplitude} tan(${frequency}x + ${phase}) + ${vertical}`;
          break;
      }
      
      // Draw graph
      const canvas = graphCtx.canvas;
      const width = canvas.width;
      const height = canvas.height;
      
      graphCtx.clearRect(0, 0, width, height);
      
      // Draw coordinate system
      drawCoordinateSystem(graphCtx);
      
      // Draw graph
      graphCtx.beginPath();
      graphCtx.strokeStyle = '#3498db';
      graphCtx.lineWidth = 2;
      
      // Define the range to draw (from -2π to 2π)
      const startX = -2 * Math.PI;
      const endX = 2 * Math.PI;
      const step = 0.05;
      
      let firstPoint = true;
      
      for (let mathX = startX; mathX <= endX; mathX += step) {
        let y;
        
        switch(graphFunction) {
          case 'sine':
            y = amplitude * Math.sin(frequency * mathX + phase) + vertical;
            break;
          case 'cosine':
            y = amplitude * Math.cos(frequency * mathX + phase) + vertical;
            break;
          case 'tangent':
            y = amplitude * Math.tan(frequency * mathX + phase) + vertical;
            // Avoid drawing asymptotes
            if (Math.abs(y) > 10) {
              firstPoint = true;
              continue;
            }
            break;
        }
        
        const screenX = transformX(mathX, canvas);
        const screenY = transformY(y, canvas);
        
        if (firstPoint) {
          graphCtx.moveTo(screenX, screenY);
          firstPoint = false;
        } else {
          graphCtx.lineTo(screenX, screenY);
        }
      }
      
      graphCtx.stroke();
      
      // Label key features
      graphCtx.fillStyle = '#000';
      graphCtx.font = '12px Arial';
      graphCtx.fillText(`Amplitude: ${amplitude}`, 20, 30);
      graphCtx.fillText(`Period: ${period.toFixed(2)}`, 20, 50);
      graphCtx.fillText(`Phase Shift: ${phase}`, 20, 70);
      graphCtx.fillText(`Vertical Shift: ${vertical}`, 20, 90);
    }

    // IDENTITIES SECTION
    function updateIdentities() {
      const identityType = document.getElementById('identityType').value;
      const angle = parseInt(document.getElementById('identityAngleSlider').value);
      const radians = angle * Math.PI / 180;
      
      document.getElementById('identityAngleValue').textContent = `${angle}°`;
      
      let identityDisplay = '';
      let leftSide = 0;
      let rightSide = 0;
      
      switch(identityType) {
        case 'pythagorean':
          identityDisplay = 'sin²(θ) + cos²(θ) = 1';
          leftSide = Math.pow(Math.sin(radians), 2) + Math.pow(Math.cos(radians), 2);
          rightSide = 1;
          break;
        case 'angleSum':
          identityDisplay = 'sin(30° + θ) = sin(30°)cos(θ) + cos(30°)sin(θ)';
          leftSide = Math.sin(30 * Math.PI / 180 + radians);
          rightSide = Math.sin(30 * Math.PI / 180) * Math.cos(radians) + 
                     Math.cos(30 * Math.PI / 180) * Math.sin(radians);
          break;
        case 'doubleAngle':
          identityDisplay = 'sin(2θ) = 2sin(θ)cos(θ)';
          leftSide = Math.sin(2 * radians);
          rightSide = 2 * Math.sin(radians) * Math.cos(radians);
          break;
      }
      
      document.getElementById('identityDisplay').textContent = identityDisplay;
      document.getElementById('leftSide').textContent = leftSide.toFixed(3);
      document.getElementById('rightSide').textContent = rightSide.toFixed(3);
      
      const isVerified = Math.abs(leftSide - rightSide) < 0.001;
      document.getElementById('verificationResult').textContent = 
        isVerified ? 'Identity holds true' : 'Identity does not hold';
      document.getElementById('verificationResult').style.color = 
        isVerified ? '#2ecc71' : '#e74c3c';
      
      // Draw visualization for the identity
      const canvas = identityCtx.canvas;
      identityCtx.clearRect(0, 0, canvas.width, canvas.height);
      
      identityCtx.fillStyle = '#000';
      identityCtx.font = '16px Arial';
      identityCtx.fillText(identityDisplay, canvas.width / 2 - 150, 30);
      
      identityCtx.fillText(`For θ = ${angle}°:`, canvas.width / 2 - 50, 60);
      identityCtx.fillText(`Left side: ${leftSide.toFixed(3)}`, canvas.width / 2 - 80, 90);
      identityCtx.fillText(`Right side: ${rightSide.toFixed(3)}`, canvas.width / 2 - 80, 120);
      
      // Draw unit circle for Pythagorean identity
      if (identityType === 'pythagorean') {
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2 + 50;
        const radius = 100;
        
        identityCtx.beginPath();
        identityCtx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
        identityCtx.strokeStyle = '#3498db';
        identityCtx.stroke();
        
        // Draw angle
        identityCtx.beginPath();
        identityCtx.moveTo(centerX, centerY);
        identityCtx.lineTo(centerX + radius * Math.cos(radians), centerY - radius * Math.sin(radians));
        identityCtx.strokeStyle = '#e74c3c';
        identityCtx.stroke();
        
        // Draw point
        identityCtx.beginPath();
        identityCtx.arc(centerX + radius * Math.cos(radians), centerY - radius * Math.sin(radians), 5, 0, 2 * Math.PI);
        identityCtx.fillStyle = '#e74c3c';
        identityCtx.fill();
        
        // Draw projections
        identityCtx.beginPath();
        identityCtx.moveTo(centerX + radius * Math.cos(radians), centerY - radius * Math.sin(radians));
        identityCtx.lineTo(centerX + radius * Math.cos(radians), centerY);
        identityCtx.strokeStyle = '#95a5a6';
        identityCtx.setLineDash([5, 5]);
        identityCtx.stroke();
        
        identityCtx.beginPath();
        identityCtx.moveTo(centerX + radius * Math.cos(radians), centerY - radius * Math.sin(radians));
        identityCtx.lineTo(centerX, centerY - radius * Math.sin(radians));
        identityCtx.stroke();
        identityCtx.setLineDash([]);
        
        // Label sides
        identityCtx.fillText('sin(θ)', centerX - 30, centerY - radius * Math.sin(radians) / 2);
        identityCtx.fillText('cos(θ)', centerX + radius * Math.cos(radians) / 2, centerY + 20);
        identityCtx.fillText('1', centerX + radius * Math.cos(radians) / 2 - 10, centerY - radius * Math.sin(radians) / 2);
      }
    }
    
    function verifyIdentity() {
      updateIdentities();
    }

    // APPLICATIONS SECTION
    function showApplication() {
      const applicationType = document.getElementById('applicationType').value;
      const canvas = applicationCtx.canvas;
      applicationCtx.clearRect(0, 0, canvas.width, canvas.height);
      
      let explanation = '';
      
      switch(applicationType) {
        case 'height':
          // Draw height measurement scenario
          applicationCtx.fillStyle = '#000';
          applicationCtx.font = '14px Arial';
          applicationCtx.fillText('Height Measurement', canvas.width / 2 - 70, 30);
          
          // Draw ground
          applicationCtx.beginPath();
          applicationCtx.moveTo(50, canvas.height - 50);
          applicationCtx.lineTo(canvas.width - 50, canvas.height - 50);
          applicationCtx.strokeStyle = '#7f8c8d';
          applicationCtx.lineWidth = 2;
          applicationCtx.stroke();
          
          // Draw tree/building
          applicationCtx.beginPath();
          applicationCtx.moveTo(150, canvas.height - 50);
          applicationCtx.lineTo(150, 150);
          applicationCtx.strokeStyle = '#8e44ad';
          applicationCtx.lineWidth = 10;
          applicationCtx.stroke();
          
          // Draw observer
          applicationCtx.beginPath();
          applicationCtx.arc(50, canvas.height - 70, 20, 0, 2 * Math.PI);
          applicationCtx.fillStyle = '#3498db';
          applicationCtx.fill();
          
          // Draw line of sight
          applicationCtx.beginPath();
          applicationCtx.moveTo(50, canvas.height - 70);
          applicationCtx.lineTo(150, 150);
          applicationCtx.strokeStyle = '#e74c3c';
          applicationCtx.lineWidth = 1;
          applicationCtx.stroke();
          
          // Draw angle
          applicationCtx.beginPath();
          applicationCtx.arc(50, canvas.height - 70, 40, 0, Math.atan(100/80), false);
          applicationCtx.strokeStyle = '#e74c3c';
          applicationCtx.stroke();
          
          // Labels
          applicationCtx.fillText('Observer', 20, canvas.height - 90);
          applicationCtx.fillText('Tree/Building', 130, canvas.height - 20);
          applicationCtx.fillText('θ', 70, canvas.height - 100);
          applicationCtx.fillText('distance', 80, canvas.height - 30);
          applicationCtx.fillText('height', 160, canvas.height / 2);
          
          explanation = '<p><strong>Height Measurement:</strong> If you know the distance to an object and the angle of elevation, you can calculate its height using the tangent function: height = distance × tan(angle).</p>';
          break;
          
        case 'distance':
          // Draw distance calculation scenario
          applicationCtx.fillStyle = '#000';
          applicationCtx.font = '14px Arial';
          applicationCtx.fillText('Distance Calculation', canvas.width / 2 - 70, 30);
          
          // Draw two points
          applicationCtx.beginPath();
          applicationCtx.arc(100, canvas.height - 100, 5, 0, 2 * Math.PI);
          applicationCtx.fillStyle = '#3498db';
          applicationCtx.fill();
          
          applicationCtx.beginPath();
          applicationCtx.arc(400, canvas.height - 150, 5, 0, 2 * Math.PI);
          applicationCtx.fillStyle = '#3498db';
          applicationCtx.fill();
          
          // Draw baseline
          applicationCtx.beginPath();
          applicationCtx.moveTo(50, canvas.height - 50);
          applicationCtx.lineTo(canvas.width - 50, canvas.height - 50);
          applicationCtx.strokeStyle = '#7f8c8d';
          applicationCtx.lineWidth = 2;
          applicationCtx.stroke();
          
          // Draw lines to points
          applicationCtx.beginPath();
          applicationCtx.moveTo(100, canvas.height - 100);
          applicationCtx.lineTo(400, canvas.height - 150);
          applicationCtx.strokeStyle = '#e74c3c';
          applicationCtx.lineWidth = 1;
          applicationCtx.stroke();
          
          applicationCtx.beginPath();
          applicationCtx.moveTo(100, canvas.height - 100);
          applicationCtx.lineTo(100, canvas.height - 50);
          applicationCtx.strokeStyle = '#95a5a6';
          applicationCtx.setLineDash([5, 5]);
          applicationCtx.stroke();
          
          applicationCtx.beginPath();
          applicationCtx.moveTo(400, canvas.height - 150);
          applicationCtx.lineTo(400, canvas.height - 50);
          applicationCtx.stroke();
          applicationCtx.setLineDash([]);
          
          // Labels
          applicationCtx.fillText('Point A', 80, canvas.height - 110);
          applicationCtx.fillText('Point B', 380, canvas.height - 160);
          applicationCtx.fillText('baseline', canvas.width / 2 - 30, canvas.height - 30);
          applicationCtx.fillText('distance', 240, canvas.height - 120);
          
          explanation = '<p><strong>Distance Calculation:</strong> Using trigonometry, you can calculate the distance between two points when you know the baseline distance and the angles from each point to the other.</p>';
          break;
          
        case 'navigation':
          // Draw navigation scenario
          applicationCtx.fillStyle = '#000';
          applicationCtx.font = '14px Arial';
          applicationCtx.fillText('Navigation', canvas.width / 2 - 40, 30);
          
          // Draw compass
          const centerX = canvas.width / 2;
          const centerY = canvas.height / 2;
          const radius = 100;
          
          applicationCtx.beginPath();
          applicationCtx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
          applicationCtx.strokeStyle = '#3498db';
          applicationCtx.lineWidth = 2;
          applicationCtx.stroke();
          
          // Draw cardinal directions
          applicationCtx.fillText('N', centerX, centerY - radius - 10);
          applicationCtx.fillText('S', centerX, centerY + radius + 20);
          applicationCtx.fillText('E', centerX + radius + 10, centerY);
          applicationCtx.fillText('W', centerX - radius - 10, centerY);
          
          // Draw bearing line
          const bearing = 45; // 45 degrees from North
          applicationCtx.beginPath();
          applicationCtx.moveTo(centerX, centerY);
          applicationCtx.lineTo(centerX + radius * Math.sin(bearing * Math.PI / 180), 
                               centerY - radius * Math.cos(bearing * Math.PI / 180));
          applicationCtx.strokeStyle = '#e74c3c';
          applicationCtx.lineWidth = 2;
          applicationCtx.stroke();
          
          // Draw angle
          applicationCtx.beginPath();
          applicationCtx.arc(centerX, centerY, 30, -Math.PI/2, -Math.PI/2 + bearing * Math.PI / 180, false);
          applicationCtx.strokeStyle = '#e74c3c';
          applicationCtx.stroke();
          
          applicationCtx.fillText(`${bearing}°`, centerX + 20, centerY - 20);
          
          explanation = '<p><strong>Navigation:</strong> In navigation, bearings are measured clockwise from North. Trigonometric functions help calculate positions and courses.</p>';
          break;
      }
      
      document.getElementById('applicationExplanation').innerHTML = explanation;
    }
    
    function showWaveApplication() {
      const waveType = document.getElementById('waveType').value;
      const canvas = waveCtx.canvas;
      waveCtx.clearRect(0, 0, canvas.width, canvas.height);
      
      let explanation = '';
      
      switch(waveType) {
        case 'sound':
          // Draw sound wave
          waveCtx.fillStyle = '#000';
          waveCtx.font = '14px Arial';
          waveCtx.fillText('Sound Wave', canvas.width / 2 - 40, 30);
          
          waveCtx.beginPath();
          waveCtx.strokeStyle = '#3498db';
          waveCtx.lineWidth = 2;
          
          for (let x = 0; x < canvas.width; x++) {
            const y = canvas.height / 2 + 50 * Math.sin(x / 20);
            if (x === 0) {
              waveCtx.moveTo(x, y);
            } else {
              waveCtx.lineTo(x, y);
            }
          }
          
          waveCtx.stroke();
          
          // Label amplitude and wavelength
          waveCtx.fillText('Amplitude', 20, canvas.height / 2 - 60);
          waveCtx.fillText('Wavelength', canvas.width / 2, canvas.height / 2 + 80);
          
          explanation = '<p><strong>Sound Waves:</strong> Sound can be modeled as a sine wave: y = A sin(2πft), where A is amplitude, f is frequency, and t is time.</p>';
          break;
          
        case 'light':
          // Draw light wave
          waveCtx.fillStyle = '#000';
          waveCtx.font = '14px Arial';
          waveCtx.fillText('Light Wave', canvas.width / 2 - 40, 30);
          
          // Draw electromagnetic wave
          for (let x = 0; x < canvas.width; x += 40) {
            waveCtx.beginPath();
            waveCtx.ellipse(x, canvas.height / 2, 15, 50, 0, 0, 2 * Math.PI);
            waveCtx.strokeStyle = '#3498db';
            waveCtx.lineWidth = 1;
            waveCtx.stroke();
          }
          
          waveCtx.fillText('Wavelength', canvas.width / 2, canvas.height / 2 + 80);
          
          explanation = '<p><strong>Light Waves:</strong> Light is an electromagnetic wave with electric and magnetic field components oscillating perpendicular to each other.</p>';
          break;
          
        case 'tides':
          // Draw tide graph
          waveCtx.fillStyle = '#000';
          waveCtx.font = '14px Arial';
          waveCtx.fillText('Ocean Tides', canvas.width / 2 - 40, 30);
          
          waveCtx.beginPath();
          waveCtx.strokeStyle = '#3498db';
          waveCtx.lineWidth = 2;
          
          for (let x = 0; x < canvas.width; x++) {
            const y = canvas.height / 2 + 40 * Math.sin(x / 30) + 20 * Math.sin(x / 100);
            if (x === 0) {
              waveCtx.moveTo(x, y);
            } else {
              waveCtx.lineTo(x, y);
            }
          }
          
          waveCtx.stroke();
          
          // Draw mean sea level
          waveCtx.beginPath();
          waveCtx.moveTo(0, canvas.height / 2);
          waveCtx.lineTo(canvas.width, canvas.height / 2);
          waveCtx.strokeStyle = '#95a5a6';
          waveCtx.setLineDash([5, 5]);
          waveCtx.stroke();
          waveCtx.setLineDash([]);
          
          waveCtx.fillText('Mean Sea Level', canvas.width - 100, canvas.height / 2 - 10);
          waveCtx.fillText('High Tide', 50, canvas.height / 2 - 60);
          waveCtx.fillText('Low Tide', 50, canvas.height / 2 + 60);
          
          explanation = '<p><strong>Ocean Tides:</strong> Tides follow a periodic pattern influenced by the gravitational pull of the moon and sun, often modeled with trigonometric functions.</p>';
          break;
      }
      
      document.getElementById('waveExplanation').innerHTML = explanation;
    }
    
    function showPhysicsApplication() {
      const physicsType = document.getElementById('physicsType').value;
      let explanation = '';
      
      switch(physicsType) {
        case 'projectile':
          explanation = `
            <p><strong>Projectile Motion:</strong> The horizontal and vertical components of projectile motion can be analyzed using trigonometric functions.</p>
            <p>If a projectile is launched with initial velocity v at angle θ:</p>
            <ul>
              <li>Horizontal velocity: v<sub>x</sub> = v cos(θ)</li>
              <li>Vertical velocity: v<sub>y</sub> = v sin(θ)</li>
              <li>Time of flight: t = (2v sin(θ)) / g</li>
              <li>Range: R = (v² sin(2θ)) / g</li>
              <li>Maximum height: H = (v² sin²(θ)) / (2g)</li>
            </ul>
          `;
          break;
          
        case 'forces':
          explanation = `
            <p><strong>Force Analysis:</strong> When a force is applied at an angle, it can be resolved into horizontal and vertical components using trigonometry.</p>
            <p>If a force F is applied at angle θ to the horizontal:</p>
            <ul>
              <li>Horizontal component: F<sub>x</sub> = F cos(θ)</li>
              <li>Vertical component: F<sub>y</sub> = F sin(θ)</li>
            </ul>
            <p>This is essential for analyzing forces on inclined planes, tension in ropes, and many other physics problems.</p>
          `;
          break;
          
        case 'circuits':
          explanation = `
            <p><strong>AC Circuits:</strong> In alternating current (AC) circuits, voltage and current vary sinusoidally with time.</p>
            <p>For a simple AC circuit:</p>
            <ul>
              <li>Voltage: V(t) = V<sub>max</sub> sin(ωt)</li>
              <li>Current: I(t) = I<sub>max</sub> sin(ωt + φ)</li>
            </ul>
            <p>Where ω is the angular frequency and φ is the phase difference between voltage and current.</p>
            <p>Impedance in AC circuits also involves trigonometric relationships, especially when dealing with capacitors and inductors.</p>
          `;
          break;
      }
      
      document.getElementById('physicsExplanation').innerHTML = explanation;
    }

    // Navigation function to switch between sections
    function showConcept(conceptId) {
      document.querySelectorAll('.concept').forEach(el => {
        el.classList.remove('active');
      });
      document.getElementById(conceptId).classList.add('active');
      updateProgressBar();
      
      switch(conceptId) {
        case 'introduction':
          // No special initialization needed
          break;
        case 'angles':
          updateTriangle();
          break;
        case 'unit-circle':
          updateUnitCircle();
          break;
        case 'functions':
          updateFunctions();
          break;
        case 'graphs':
          updateGraphs();
          break;
        case 'identities':
          updateIdentities();
          break;
        case 'applications':
          showApplication();
          showWaveApplication();
          showPhysicsApplication();
          break;
        case 'practice':
          displayCurrentProblem();
          break;
      }
    }

    // Practice Problems Section
    const problemSets = {
      triangles: [
        {
          question: "In a right triangle, if one acute angle is 30°, what is the measure of the other acute angle?",
          answer: "60",
          solution: "In a right triangle, the two acute angles sum to 90°. So if one is 30°, the other is 90° - 30° = 60°.",
          hint: "Remember that the sum of angles in a triangle is 180°, and a right triangle has one 90° angle."
        },
        {
          question: "In a right triangle, the hypotenuse is 10 cm and one angle is 30°. What is the length of the side opposite the 30° angle?",
          answer: "5",
          solution: "sin(30°) = opposite/hypotenuse = 1/2. So opposite = (1/2) × 10 = 5 cm.",
          hint: "Use the sine function: sin(angle) = opposite/hypotenuse"
        },
        {
          question: "A ladder leans against a wall, making a 60° angle with the ground. If the ladder is 10 m long, how far up the wall does it reach?",
          answer: "8.66",
          solution: "sin(60°) = height/10. sin(60°) = √3/2 ≈ 0.866. So height = 10 × 0.866 = 8.66 m.",
          hint: "The height is the side opposite the 60° angle, and the ladder is the hypotenuse."
        }
      ],
      'unit-circle': [
        {
          question: "What are the coordinates of the point on the unit circle at 45°?",
          answer: "(√2/2, √2/2)",
          solution: "At 45°, both x and y coordinates are equal to √2/2 ≈ 0.707.",
          hint: "Think about the special 45-45-90 triangle."
        },
        {
          question: "What is sin(90°)?",
          answer: "1",
          solution: "At 90° on the unit circle, the coordinates are (0, 1), so sin(90°) = y-coordinate = 1.",
          hint: "Look at the y-coordinate on the unit circle at 90°."
        },
        {
          question: "What is cos(π)?",
          answer: "-1",
          solution: "π radians = 180°. At 180° on the unit circle, the coordinates are (-1, 0), so cos(π) = x-coordinate = -1.",
          hint: "π radians equals 180 degrees."
        }
      ],
      identities: [
        {
          question: "Simplify: sin²(θ) + cos²(θ)",
          answer: "1",
          solution: "This is the Pythagorean identity: sin²(θ) + cos²(θ) = 1 for all values of θ.",
          hint: "This is a fundamental trigonometric identity."
        },
        {
          question: "Simplify: 1 + tan²(θ)",
          answer: "sec²(θ)",
          solution: "This is another form of the Pythagorean identity: 1 + tan²(θ) = sec²(θ).",
          hint: "Divide the Pythagorean identity sin²(θ) + cos²(θ) = 1 by cos²(θ)."
        },
        {
          question: "Express sin(2θ) in terms of sin(θ) and cos(θ)",
          answer: "2sin(θ)cos(θ)",
          solution: "This is the double-angle identity for sine: sin(2θ) = 2sin(θ)cos(θ).",
          hint: "This is a double-angle identity."
        }
      ],
      applications: [
        {
          question: "A tree casts a shadow 20 m long when the sun is at a 30° angle of elevation. How tall is the tree?",
          answer: "11.55",
          solution: "tan(30°) = height/20. tan(30°) = 1/√3 ≈ 0.577. So height = 20 × 0.577 = 11.55 m.",
          hint: "Use the tangent function: tan(angle) = opposite/adjacent"
        },
        {
          question: "A plane flies at a bearing of 45° (NE) for 100 km. How far north has it traveled?",
          answer: "70.71",
          solution: "The north component = 100 × cos(45°) = 100 × (√2/2) ≈ 100 × 0.7071 = 70.71 km.",
          hint: "In navigation, the north component is found using cosine of the bearing angle."
        },
        {
          question: "A Ferris wheel with radius 10 m completes one revolution every 2 minutes. What is the height of a rider after 30 seconds if they boarded at the bottom?",
          answer: "10",
          solution: "After 30 seconds (1/4 of the period), the rider is at the top. Height = radius + radius = 10 + 10 = 20 m from ground. Wait, the question asks for height, which would be 20 m. But if we consider height from the center, it would be 10 m. Clarification needed.",
          hint: "Think about the position on the circle after 1/4 of a revolution."
        }
      ]
    };

    let currentProblemType = 'triangles';
    let currentProblemIndex = 0;

    function changeProblemType(type) {
      currentProblemType = type;
      currentProblemIndex = 0;
      displayCurrentProblem();
      document.getElementById('problemTitle').textContent = type.charAt(0).toUpperCase() + type.slice(1) + ' Problems';
      document.getElementById('hint').style.display = 'none';
      document.getElementById('feedback').style.display = 'none';
      document.getElementById('solution').style.display = 'none';
    }

    function displayCurrentProblem() {
      const problem = problemSets[currentProblemType][currentProblemIndex];
      document.getElementById('currentProblem').innerHTML = problem.question;
      document.getElementById('feedback').style.display = 'none';
      document.getElementById('solution').style.display = 'none';
      document.getElementById('hint').style.display = 'none';
      document.getElementById('userAnswer').value = '';
      updateMath();
    }

    function checkAnswer() {
      const userAnswer = document.getElementById('userAnswer').value;
      const problem = problemSets[currentProblemType][currentProblemIndex];
      const feedback = document.getElementById('feedback');
      const isCorrect = typeof problem.answer === 'number'
        ? Math.abs(parseFloat(userAnswer) - problem.answer) < 0.1
        : userAnswer.toLowerCase().replace(/\s+/g, '') === problem.answer.toLowerCase().replace(/\s+/g, '');
      feedback.style.display = 'block';
      feedback.innerHTML = isCorrect 
        ? '<span style="color: green">Correct! Well done!</span>' 
        : '<span style="color: red">Not quite right. Try again or view the solution.</span>';
      updateMath();
    }

    function showSolution() {
      const solution = document.getElementById('solution');
      solution.style.display = 'block';
      solution.textContent = problemSets[currentProblemType][currentProblemIndex].solution;
      updateMath();
    }
    
    function hint() {
      const hint = document.getElementById('hint');
      hint.style.display = 'block';
      hint.textContent = "Hint: " + problemSets[currentProblemType][currentProblemIndex].hint;
    }

    function nextProblem() {
      currentProblemIndex = (currentProblemIndex + 1) % problemSets[currentProblemType].length;
      displayCurrentProblem();
    }

    // Event listeners for real-time updates
    document.getElementById('angleASlider').addEventListener('input', updateTriangle);
    document.getElementById('angleBSlider').addEventListener('input', updateTriangle);
    document.getElementById('angleSlider').addEventListener('input', updateUnitCircle);
    document.getElementById('angleMode').addEventListener('change', updateUnitCircle);
    document.getElementById('functionAngleSlider').addEventListener('input', updateFunctions);
    document.getElementById('functionSelect').addEventListener('change', updateFunctions);
    document.getElementById('amplitudeSlider').addEventListener('input', updateGraphs);
    document.getElementById('frequencySlider').addEventListener('input', updateGraphs);
    document.getElementById('phaseSlider').addEventListener('input', updateGraphs);
    document.getElementById('verticalSlider').addEventListener('input', updateGraphs);
    document.getElementById('graphFunction').addEventListener('change', updateGraphs);
    document.getElementById('identityType').addEventListener('change', updateIdentities);
    document.getElementById('identityAngleSlider').addEventListener('input', updateIdentities);

    // Initialize all sections
    updateProgressBar();
    updateTriangle();
    updateUnitCircle();
    updateFunctions();
    updateGraphs();
    updateIdentities();
    showApplication();
    showWaveApplication();
    showPhysicsApplication();
    displayCurrentProblem();
  </script>
</body>
</html>
